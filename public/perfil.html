
<!-- Forçar atualização de cache: 2025-10-09 12:45 -->
<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meu Perfil - Sua Viagem Aqui</title>
    <link rel="manifest" href="/manifest.json" />
    <link rel="stylesheet" href="/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body class="bg-slate-900 flex flex-col min-h-screen">
    <!-- Header -->
    <header
      id="main-header"
      class="bg-slate-900/80 backdrop-blur-lg shadow-lg sticky top-0 z-50 border-b border-slate-700"
    >
      <!-- O header será carregado aqui -->
    </header>

    <!-- Conteúdo Principal -->
    <main class="flex-grow container mx-auto px-4 py-16">
      <!-- Estado de Carregamento -->
      <div id="loading-state" class="text-center py-20">
        <div class="modern-spinner mx-auto"></div>
        <p class="mt-4 text-lg text-slate-400">Carregando seu perfil...</p>
      </div>

      <!-- Estado de Permissão Negada -->
      <div id="permission-denied" class="hidden text-center py-20">
        <i class="fas fa-lock text-5xl text-red-500 mb-4"></i>
        <h2 class="text-3xl font-bold">Acesso Negado</h2>
        <p class="text-slate-400 mt-2">
          Você precisa estar logado para acessar esta página.
        </p>
      </div>

      <!-- Conteúdo do Perfil -->
      <div id="content-state" class="hidden max-w-4xl mx-auto space-y-12">
        <!-- Container de Visualização -->
        <div id="profile-view-container">
          <div
            class="glass-effect rounded-3xl p-8 md:p-10 shadow-2xl flex flex-col md:flex-row items-center gap-8"
          >
            <!-- Foto de Perfil -->
            <div class="relative group flex-shrink-0">
              <img
                id="profile-picture-view"
                src="https://placehold.co/128x128/1f2937/fcd34d?text=SVA"
                alt="Foto de Perfil"
                class="w-32 h-32 rounded-full object-cover border-4 border-slate-700"
              />
            </div>

            <!-- Informações do Usuário -->
            <div class="space-y-2 flex-grow text-center md:text-left">
              <h1 id="user-name-view" class="text-3xl font-bold text-white"></h1>
              <p id="user-email-view" class="text-slate-400"></p>
              <p id="user-control-code-view" class="text-xs text-slate-500"></p>
            </div>

            <!-- Botão de Editar -->
            <div class="w-full md:w-auto mt-6 md:mt-0">
              <button
                id="edit-profile-btn"
                class="btn-primary w-full py-3 px-6 text-base"
              >
                <i class="fas fa-pencil-alt mr-2"></i>Editar Perfil
              </button>
            </div>
          </div>
        </div>

        <!-- Container de Edição -->
        <div id="profile-edit-container" class="hidden">
          <form id="profile-edit-form" class="glass-effect rounded-3xl p-8 md:p-10 shadow-2xl space-y-6">
             <div class="flex flex-col md:flex-row items-center gap-8">
                <!-- Upload de Foto -->
                <div class="relative group flex-shrink-0">
                    <img id="profile-picture-edit" src="https://placehold.co/128x128/1f2937/fcd34d?text=SVA" alt="Foto de Perfil" class="w-32 h-32 rounded-full object-cover border-4 border-slate-700"/>
                    <label for="photo-upload" class="absolute inset-0 bg-black/50 rounded-full flex items-center justify-center text-white text-xl opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer" title="Alterar foto">
                        <i class="fas fa-camera"></i>
                    </label>
                    <input type="file" id="photo-upload" class="hidden" accept="image/*"/>
                </div>
                 <!-- Campos de Edição -->
                <div class="space-y-4 flex-grow w-full">
                    <div>
                        <label for="user-name-edit" class="block text-white text-sm font-semibold mb-2">Seu Nome</label>
                        <input id="user-name-edit" type="text" required class="form-input"/>
                    </div>
                </div>
            </div>
            <div id="upload-progress-container" class="hidden pt-2">
                <div class="w-full bg-slate-700 rounded-full h-2.5">
                    <div id="upload-progress-bar" class="bg-cyan-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            <div class="pt-4 flex flex-col md:flex-row gap-4">
                <button type="submit" id="save-profile-btn" class="w-full md:w-1/2 bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">
                    <span class="submit-text flex items-center justify-center"><i class="fas fa-save mr-2"></i>Salvar Alterações</span>
                    <span class="submit-loading hidden items-center justify-center"><div class="modern-spinner-btn mr-2"></div>Salvando...</span>
                </button>
                <button type="button" id="cancel-edit-btn" class="w-full md:w-1/2 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-6 rounded-lg transition-colors">Cancelar</button>
            </div>
          </form>
        </div>

        <!-- Navegação do Perfil -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
            <a href="/meus_roteiros.html" class="glass-effect p-8 rounded-2xl card-hover">
                <i class="fas fa-map-signs text-4xl text-cyan-400 mb-4"></i>
                <h3 class="text-xl font-bold text-white">Meus Roteiros</h3>
            </a>
            <a href="/meus_favoritos.html" class="glass-effect p-8 rounded-2xl card-hover">
                <i class="fas fa-heart text-4xl text-cyan-400 mb-4"></i>
                <h3 class="text-xl font-bold text-white">Meus Favoritos</h3>
            </a>
            <a href="/meu_feed.html" class="glass-effect p-8 rounded-2xl card-hover">
                <i class="fas fa-stream text-4xl text-cyan-400 mb-4"></i>
                <h3 class="text-xl font-bold text-white">Meu Feed</h3>
            </a>
        </div>

      </div>
    </main>

    <!-- Footer -->
    <footer id="main-footer" class="bg-slate-800/50 border-t border-slate-700">
      <!-- O rodapé será carregado aqui -->
    </footer>
    
    <!-- Modal de Alerta -->
    <div id="alert-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4">
      <div class="bg-slate-800 rounded-2xl shadow-xl p-8 max-w-sm w-full text-center border border-slate-600">
        <p id="alert-message" class="text-white text-lg mb-6"></p>
        <button id="alert-close-btn" class="bg-amber-500 hover:bg-amber-600 text-slate-900 font-bold py-3 px-8 rounded-lg transition">OK</button>
      </div>
    </div>

    <script type="module" src="/src/layout.js"></script>
    <script type="module" src="/src/perfil.js"></script>
  </body>
</html>